<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.43">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/favicon.ico"><meta name="robots" content="all"><meta name="author" content="fengzijk"><meta name="keywords" content="中间件,微服务,服务治理,springcloud, java框架,calf-cloud,go学习路线,java spring,  java编程指南, vue开发,vue教程,java,java数据结构"><meta name="apple-mobile-web-app-capable" content="yes"><script src="https://hm.baidu.com/hm.js?7469927f8d68f752c147cd9df8cd19d3"></script><title>fengzijk的博客</title><meta name="description" content="fengzijk的博客">
    <link rel="modulepreload" href="/assets/app.c62b2955.js"><link rel="modulepreload" href="/assets/服务治理框架之DUBBO.html.cca6060d.js"><link rel="modulepreload" href="/assets/服务治理框架之DUBBO.html.f30b8060.js"><link rel="prefetch" href="/assets/aboat-me.html.7265baab.js"><link rel="prefetch" href="/assets/index.html.c038c7ec.js"><link rel="prefetch" href="/assets/centos-redis-源码安装配置.html.f1f14ff9.js"><link rel="prefetch" href="/assets/centos下yum安装卸载mysql笔记.html.33461b47.js"><link rel="prefetch" href="/assets/Centos安装JDK.html.6c0752bd.js"><link rel="prefetch" href="/assets/ICE入门到精通(一).html.0f6a85e8.js"><link rel="prefetch" href="/assets/java8.html.77563c06.js"><link rel="prefetch" href="/assets/JAVA实现类似百度文库在线浏览.html.7fe84d87.js"><link rel="prefetch" href="/assets/Kotlin初探集成springMvc.html.7c9536b6.js"><link rel="prefetch" href="/assets/MongoDB地理位置索引的实现原理.html.d1e0bb0d.js"><link rel="prefetch" href="/assets/QQ实用技术.html.ba418346.js"><link rel="prefetch" href="/assets/index.html.1794e816.js"><link rel="prefetch" href="/assets/ROM修改之厨房简介及环境配置.html.1b1502c8.js"><link rel="prefetch" href="/assets/关于RPC的总结.html.037d7c7e.js"><link rel="prefetch" href="/assets/自己刷机的一些感触和经验.html.af298b9a.js"><link rel="prefetch" href="/assets/让国产山寨手机死机黑屏之imy.html.ca41c909.js"><link rel="prefetch" href="/assets/谈谈服务治理与微服务.html.a28c8290.js"><link rel="prefetch" href="/assets/阿里云部署Web环境(LAMP).html.2fd4fe4c.js"><link rel="prefetch" href="/assets/404.html.93146c89.js"><link rel="prefetch" href="/assets/aboat-me.html.90600189.js"><link rel="prefetch" href="/assets/index.html.bf3f4e88.js"><link rel="prefetch" href="/assets/centos-redis-源码安装配置.html.aa4a0e51.js"><link rel="prefetch" href="/assets/centos下yum安装卸载mysql笔记.html.8f8a6042.js"><link rel="prefetch" href="/assets/Centos安装JDK.html.3e4cc809.js"><link rel="prefetch" href="/assets/ICE入门到精通(一).html.84ecdd3d.js"><link rel="prefetch" href="/assets/java8.html.21e91c1a.js"><link rel="prefetch" href="/assets/JAVA实现类似百度文库在线浏览.html.6a33f2e3.js"><link rel="prefetch" href="/assets/Kotlin初探集成springMvc.html.00bb4e8d.js"><link rel="prefetch" href="/assets/MongoDB地理位置索引的实现原理.html.6848c28a.js"><link rel="prefetch" href="/assets/QQ实用技术.html.5045b312.js"><link rel="prefetch" href="/assets/index.html.bd8b4e91.js"><link rel="prefetch" href="/assets/ROM修改之厨房简介及环境配置.html.0fdebcce.js"><link rel="prefetch" href="/assets/关于RPC的总结.html.9ccb2018.js"><link rel="prefetch" href="/assets/自己刷机的一些感触和经验.html.cb116888.js"><link rel="prefetch" href="/assets/让国产山寨手机死机黑屏之imy.html.a715fdd1.js"><link rel="prefetch" href="/assets/谈谈服务治理与微服务.html.cd6136ae.js"><link rel="prefetch" href="/assets/阿里云部署Web环境(LAMP).html.bf2ce772.js"><link rel="prefetch" href="/assets/404.html.11e2794b.js"><link rel="prefetch" href="/assets/404.8d3e3ac9.js"><link rel="prefetch" href="/assets/Layout.53613210.js">
    <link rel="stylesheet" href="/assets/style.78d99c6f.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">fengzijk的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JAVA"><span class="title">JAVA</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JAVA"><span class="title">JAVA</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="router-link-active" aria-label="java基础"><!--[--><!--]--> java基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="mybatis"><span class="title">mybatis</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="mybatis"><span class="title">mybatis</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/mybatis-plus/" class="" aria-label="mybatis-plus"><!--[--><!--]--> mybatis-plus <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tk-mapper/" class="" aria-label="tk-mapper"><!--[--><!--]--> tk-mapper <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="spring-cloud"><span class="title">spring-cloud</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="spring-cloud"><span class="title">spring-cloud</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="router-link-active" aria-label="spring-cloud"><!--[--><!--]--> spring-cloud <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spring-cloud-alibaba/" class="" aria-label="spring-cloud-alibaba"><!--[--><!--]--> spring-cloud-alibaba <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="杂记"><span class="title">杂记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="杂记"><span class="title">杂记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>老博客</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/old-blog/" class="router-link-active" aria-label="胡侃"><!--[--><!--]--> 胡侃 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/aboat-me.md" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitlab.com/foo/bar" rel="noopener noreferrer" target="_blank" aria-label="GitLab"><!--[--><!--]--> GitLab <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JAVA"><span class="title">JAVA</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JAVA"><span class="title">JAVA</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="router-link-active" aria-label="java基础"><!--[--><!--]--> java基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="mybatis"><span class="title">mybatis</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="mybatis"><span class="title">mybatis</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/mybatis-plus/" class="" aria-label="mybatis-plus"><!--[--><!--]--> mybatis-plus <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tk-mapper/" class="" aria-label="tk-mapper"><!--[--><!--]--> tk-mapper <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="spring-cloud"><span class="title">spring-cloud</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="spring-cloud"><span class="title">spring-cloud</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="router-link-active" aria-label="spring-cloud"><!--[--><!--]--> spring-cloud <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spring-cloud-alibaba/" class="" aria-label="spring-cloud-alibaba"><!--[--><!--]--> spring-cloud-alibaba <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="杂记"><span class="title">杂记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="杂记"><span class="title">杂记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>老博客</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/old-blog/" class="router-link-active" aria-label="胡侃"><!--[--><!--]--> 胡侃 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/aboat-me.md" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitlab.com/foo/bar" rel="noopener noreferrer" target="_blank" aria-label="GitLab"><!--[--><!--]--> GitLab <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#服务治理框架之dubbo" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务治理框架之DUBBO"><!--[--><!--]--> 服务治理框架之DUBBO <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#什么是dubbo" class="router-link-active router-link-exact-active sidebar-item" aria-label="什么是dubbo？"><!--[--><!--]--> 什么是dubbo？ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#dubbo的总体架构" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dubbo的总体架构"><!--[--><!--]--> Dubbo的总体架构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#dubbo的特点" class="router-link-active router-link-exact-active sidebar-item" aria-label="DUBBO的特点"><!--[--><!--]--> DUBBO的特点 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#服务定义" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务定义"><!--[--><!--]--> 服务定义 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#服务注册" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务注册"><!--[--><!--]--> 服务注册 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#服务监控" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务监控"><!--[--><!--]--> 服务监控 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#远程通信与信息交换" class="router-link-active router-link-exact-active sidebar-item" aria-label="远程通信与信息交换"><!--[--><!--]--> 远程通信与信息交换 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#服务调用" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务调用"><!--[--><!--]--> 服务调用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#注册-注销服务" class="router-link-active router-link-exact-active sidebar-item" aria-label="注册/注销服务"><!--[--><!--]--> 注册/注销服务 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#服务订阅-取消" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务订阅/取消"><!--[--><!--]--> 服务订阅/取消 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#协议支持" class="router-link-active router-link-exact-active sidebar-item" aria-label="协议支持"><!--[--><!--]--> 协议支持 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E6%A1%86%E6%9E%B6%E4%B9%8BDUBBO.html#dubbo个模块与关系" class="router-link-active router-link-exact-active sidebar-item" aria-label="DUBBO个模块与关系"><!--[--><!--]--> DUBBO个模块与关系 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="服务治理框架之dubbo" tabindex="-1"><a class="header-anchor" href="#服务治理框架之dubbo" aria-hidden="true">#</a> 服务治理框架之DUBBO</h2><p>发表于 2016-03-21</p><h2 id="什么是dubbo" tabindex="-1"><a class="header-anchor" href="#什么是dubbo" aria-hidden="true">#</a> 什么是dubbo？</h2><p><strong>Dubbo</strong>是阿里巴巴开源的分布式服务框架，它是按照分层的方式来架构，使用这种方式可以使各个层之间解耦合（或者最大限度地松耦合）。从服务模型的角度来看，Dubbo采用的是一种非常简单的模型，要么是提供方提供服务，要么是消费方消费服务，所以基于这一点可以抽象出服务提供方（<strong>Provider</strong>）和服务消费方（<strong>Consumer</strong>）两个角色。关<strong>于注册中心</strong>、<strong>协议支持</strong>、<strong>服务监控</strong>等内容，但遗憾的的是现在已经停止更新了。由当当网进行维护，<strong>升级为dubbox</strong>，<strong>支持了rest</strong>。<strong>更新了spring等</strong>，<strong>而在阿里内部则又HSF框架代替</strong>。</p><h2 id="dubbo的总体架构" tabindex="-1"><a class="header-anchor" href="#dubbo的总体架构" aria-hidden="true">#</a> Dubbo的总体架构</h2><p><a href="/images/dubbo/01.png"><img src="/images/dubbo/01.png" alt="image"></a><strong>Dubbo框架设计一共划分了10个层</strong>，而最上面的<strong>Service</strong>层是留给实际想要使用<strong>Dubbo</strong>开发分布式服务的开发者实现业务逻辑的接口层。图中左边淡蓝背景的为服务消费方使用的接口，右边淡绿色背景的为服务提供方使用的接口， 位于中轴线上的为双方都用到的接口。 下面，结合<strong>Dubbo官方文档</strong>，我们分别理解一下框架分层架构中，各个层次的设计要点：</p><ul><li><p><strong>服务接口层（Service</strong>）：该层是与实际业务逻辑相关的，根据服务提供方和服务消费方的业务设计对应的接口和实现。</p></li><li><p><strong>配置层（Config</strong>）：对外配置接口，以<strong>ServiceConfig</strong>和<strong>ReferenceConfig</strong>为中心，可以直接<strong>new</strong>配置类，也可以通过<strong>spring</strong>解析配置生成配置类。</p></li><li><p><strong>服务代理层（Proxy）</strong>：服务接口透明代理，生成服务的客户端<strong>Stub</strong>和服务器端<strong>Skeleton</strong>，以<strong>ServiceProxy</strong>为中心，扩展接口为<strong>ProxyFactory</strong>。</p></li><li><p><strong>服务注册层（Registry</strong>）：封装服务地址的注册与发现，以服务URL为中心，扩展接口为<strong>RegistryFactory、Registry</strong>和<strong>RegistryService</strong>。可能没有服务注册中心，此时服务提供方直接暴露服务。</p></li><li><p><strong>集群层（Cluster）</strong>：封装多个提供者的路由及负载均衡，并桥接注册中心，以<strong>Invoker</strong>为中心，<strong>扩展接口为Cluster</strong>、<strong>Directory</strong>、<strong>Router和LoadBalance</strong>。将多个服务提供方组合为一个服务提供方，实现对服务消费方来透明，只需要与一个服务提供方进行交互。</p></li><li><p><strong>监控层（Monitor</strong>）：RPC调用次数和调用时间监控，<strong>以Statistics为中心</strong>，扩展接口为MonitorFactory、<strong>Monitor和MonitorService</strong>。</p></li><li><p><strong>远程调用层（Protocol）</strong>：封将RPC调用，以<strong>Invocation</strong>和<strong>Result</strong>为中心，扩展接口为<strong>Protocol</strong>、<strong>Invoker</strong>和<strong>Exporter</strong>。<strong>Protocol</strong>是服务域，它是<strong>Invoker</strong>暴露和引用的主功能入口，它负责<strong>Invoker</strong>的生命周期管理。<strong>Invoker</strong>是实体域，它是Dubbo的核心模型，其它模型都向它靠扰，或转换成它，它代表一个可执行体，可向它发起<strong>invoke</strong>调用，它有可能是一个本地的实现，也可能是一个远程的实现，也可能一个集群实现。</p></li><li><p><em><em>信息交换层（<strong>Exchange</strong></em>*）：封装请求响应模式，同步转异步，以</em><em>Request</em><em>和</em><em>Response</em><em>为中心，扩展接口为</em><em>Exchanger、ExchangeChannel、ExchangeClient</em><em>和</em><em>ExchangeServer</em>*。</p></li><li><p><strong>网络传输层（Transport</strong>）：抽象<strong>mina</strong>和<strong>netty</strong>为统一接口，以<strong>Message</strong>为中心，扩展接口为<strong>Channel</strong>、<strong>Transporter、Client、Server和Codec</strong>。</p></li><li><p><strong>数据序列化层（Serialize）</strong>：可复用的一些工具，扩展接口为 <strong>Serialization、 ObjectInput、ObjectOutput</strong>和 <strong>ThreadPool</strong>。</p><p><strong>从上图可以看出，<strong>Dubbo</strong>对于服务提供方和服务消费方，从框架的10层中分别提供了各自需要关心和扩展的接口，构建整个服务生态系统（服务提供方和服务消费方本身就是一个以服务为中心的）。</strong></p></li></ul><p>根据官方提供的，对于上述各层之间关系的描述，如下所示：</p><ul><li><p>在RPC中，Protocol是核心层，也就是只要有<strong>Protocol</strong> + <strong>Invoker</strong> + <strong>Exporter</strong>就可以完成非透明的RPC调用，然后在<strong>Invoker</strong>的主过程上<strong>Filter</strong>拦截点。</p></li><li><p>图中的<strong>Consumer</strong>和<strong>Provider</strong>是抽象概念，只是想让看图者更直观的了解哪些类分属于客户端与服务器端，不用<strong>Client</strong>和<strong>Server</strong>的原因是<strong>Dubbo</strong>在很多场景下都使用<strong>Provider</strong>、<strong>Consumer</strong>、<strong>Registry</strong>、<strong>Monitor</strong>划分逻辑拓普节点，保持统一概念。 而<strong>Cluster</strong>是外围概念，所以<strong>Cluster</strong>的目的是将多个<strong>Invoker</strong>伪装成一个<strong>Invoker</strong>，这样其它人只要关注<strong>Protocol</strong>层<strong>Invoker</strong>即可，加上<strong>Cluster</strong>或者去掉<strong>Cluster</strong>对其它层都不会造成影响，因为只有一个提供者时，是不需要<strong>Cluster</strong>的。</p></li><li><p><strong>Proxy</strong>层封装了所有接口的透明化代理，而在其它层都以<strong>Invoker</strong>为中心，只有到了暴露给用户使用时，才用<strong>Proxy</strong>将<strong>Invoker</strong>转成接口，或将接口实现转成<strong>Invoker</strong>，也就是去掉<strong>Proxy</strong>层<strong>RPC</strong>是可以Run的，只是不那么透明，不那么看起来像调本地服务一样调远程服务。</p></li><li><p>而<strong>Remoting</strong>实现是<strong>Dubbo</strong>协议的实现，如果你选择<strong>RMI协议</strong>，整个<strong>Remoting</strong>都不会用上，<strong>Remoting</strong>内部再划为<strong>Transport</strong>传输层和<strong>Exchange</strong>信息交换层，Transport层只负责单向消息传输，是对<strong>Mina、Netty、Grizzly</strong>的抽象，它也可以扩展<strong>UDP</strong>传输，而<strong>Exchange</strong>层是在传输层之上封装<strong>了Request-Response</strong>语义。</p></li><li><p>Registry</p><p>和</p><p>Monitor</p><p>实际上不算一层，而是一个独立的节点，只是为了全局概览，用层的方式画在一起。</p><h2 id="dubbo的特点" tabindex="-1"><a class="header-anchor" href="#dubbo的特点" aria-hidden="true">#</a> DUBBO的特点</h2></li></ul><p>从上面的架构图中，我们可以了解到，<strong>Dubbo</strong>作为一个分布式服务框架，<strong>主要具有如下几个核心的要点：</strong></p><h3 id="服务定义" tabindex="-1"><a class="header-anchor" href="#服务定义" aria-hidden="true">#</a> 服务定义</h3><p><strong>服务是围绕服务提供方和服务消费方的，服务提供方实现服务，而服务消费方调用服务。</strong></p><h3 id="服务注册" tabindex="-1"><a class="header-anchor" href="#服务注册" aria-hidden="true">#</a> 服务注册</h3><p><strong>对于服务提供方，它需要发布服务，而且由于应用系统的复杂性，服务的数量、类型也不断膨胀；对于服务消费方，它最关心如何获取到它所需要的服务，而面对复杂的应用系统，需要管理大量的服务调用。而且，对于服务提供方和服务消费方来说，他们还有可能兼具这两种角色，即既需要提供服务，有需要消费服务。 通过将服务统一管理起来，可以有效地优化内部应用对服务发布/使用的流程和管理。服务注册中心可以通过特定协议来完成服务对外的统一。Dubbo提供的注册中心有如下几种类型可供选择：</strong></p><ul><li><p>Multicast注册中心</p></li><li><p>Zookeeper注册中心</p></li><li><p>Redis注册中心</p></li><li><p>Simple注册中心</p><h3 id="服务监控" tabindex="-1"><a class="header-anchor" href="#服务监控" aria-hidden="true">#</a> 服务监控</h3><p><strong>无论是服务提供方，还是服务消费方，他们都需要对服务调用的实际状态进行有效的监控，从而改进服务质量。</strong></p><h3 id="远程通信与信息交换" tabindex="-1"><a class="header-anchor" href="#远程通信与信息交换" aria-hidden="true">#</a> 远程通信与信息交换</h3><p><strong>远程通信需要指定通信双方所约定的协议，在保证通信双方理解协议语义的基础上，还要保证高效、稳定的消息传输。Dubbo继承了当前主流的网络通信框架，主要包括如下几个：</strong></p></li><li><p>Mina</p></li><li><p>Netty</p></li><li><p>Grizzly</p><h3 id="服务调用" tabindex="-1"><a class="header-anchor" href="#服务调用" aria-hidden="true">#</a> 服务调用</h3><p>下面从Dubbo官网直接拿来，看一下基于RPC层，服务提供方和服务消费方之间的调用关系，如图所示：</p></li></ul><p><a href="/images/dubbo/02.png"><img src="/images/dubbo/02.png" alt="image"></a></p><p>上图中，蓝色的表示与业务有交互，绿色的表示只对Dubbo内部交互。上述图所描述的调用流程如下：</p><ul><li>服务提供方发布服务到服务注册中心；</li><li>服务消费方从服务注册中心订阅服务；</li><li>服务消费方调用已经注册的可用服务</li></ul><p>接着，将上面抽象的调用流程图展开，详细如图所示：</p><p><a href="/images/dubbo/03.png"><img src="/images/dubbo/03.png" alt="image"></a></p><h3 id="注册-注销服务" tabindex="-1"><a class="header-anchor" href="#注册-注销服务" aria-hidden="true">#</a> 注册/注销服务</h3><p>服务的注册与注销，是对服务提供方角色而言，那么注册服务与注销服务的时序图，如图所示：</p><p><a href="/images/dubbo/04.png"><img src="/images/dubbo/04.png" alt="image"></a></p><h3 id="服务订阅-取消" tabindex="-1"><a class="header-anchor" href="#服务订阅-取消" aria-hidden="true">#</a> 服务订阅/取消</h3><p>为了满足应用系统的需求，服务消费方的可能需要从服务注册中心订阅指定的有服务提供方发布的服务，在得到通知可以使用服务时，就可以直接调用服务。反过来，如果不需要某一个服务了，可以取消该服务。下面看一下对应的时序图，如图所示：</p><p><a href="/images/dubbo/05.png"><img src="/images/dubbo/05.png" alt="image"></a></p><h3 id="协议支持" tabindex="-1"><a class="header-anchor" href="#协议支持" aria-hidden="true">#</a> 协议支持</h3><p><strong>Dubbo支持多种协议，如下所示：</strong></p><ul><li>Dubbo协议</li><li>Hessian协议</li><li>HTTP协议</li><li>RMI协议</li><li>WebService协议</li><li>Thrift协议</li><li>Memcached协议</li><li>Redis协议 <strong>在通信过程中，不同的服务等级一般对应着不同的服务质量，那么选择合适的协议便是一件非常重要的事情。你可以根据你应用的创建来选择。例如，使用RMI协议，一般会受到防火墙的限制，所以对于外部与内部进行通信的场景，就不要使用RMI协议，而是基于HTTP协议或者Hessian协议。</strong></li></ul><h3 id="dubbo个模块与关系" tabindex="-1"><a class="header-anchor" href="#dubbo个模块与关系" aria-hidden="true">#</a> <strong>DUBBO个模块与关系</strong></h3><p>Dubbo以包结构来组织各个模块，各个模块及其关系，如图所示：</p><p><a href="/images/dubbo/06.png"><img src="/images/dubbo/06.png" alt="image"></a></p><p><strong>可以通过Dubbo的代码（使用Maven管理）组织，与上面的模块进行比较。简单说明各个包的情况</strong></p><ul><li><strong>dubbo-common</strong> <strong>公共逻辑模块</strong>，包括Util类和通用模型。</li><li><strong>dubbo-remoting 远程通讯模块</strong>，相当于Dubbo协议的实现，如果RPC用RMI协议则不需要使用此包。</li><li><strong>dubbo-rpc</strong> <strong>远程调用模块</strong>，抽象各种协议，以及动态代理，只包含一对一的调用，不关心集群的管理。</li></ul><p>-<strong>dubbo-cluster</strong> <strong>集群模块</strong>，将多个服务提供方伪装为一个提供方，包括：负载均衡、容错、路由等，集群的地址列表可以是静态配置的，也可以是由注册中心下发 。</p><ul><li><strong>dubbo-registry 注册中心模块</strong>，基于注册中心下发地址的集群方式，以及对各种注册中心的抽象。</li><li><strong>dubbo-monitor</strong> <strong>监控模块，统计服务调用次数，调用时间的，调用链跟踪的服务。</strong></li><li><strong>dubbo-config</strong> <strong>配置模块</strong>，是Dubbo对外的API，用户通过Config使用Dubbo，隐藏Dubbo所有细节。</li><li><strong>dubbo-container</strong> <strong>容器模块</strong>，是一个Standalone的容器，以简单的Main加载Spring启动，因为服务通常不需要Tomcat/JBoss等Web容器的特性，没必要用Web容器去加载服务。</li></ul><p><strong>总结：dubbo 是国内应用最广 最受欢迎的服务治理框架，但是很可惜阿里不维护了 ，不过可以使用dubbox，反正据我了解 很多公司还使用dubbo。</strong></p><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.c62b2955.js" defer></script>
  </body>
</html>
