<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.43">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/favicon.ico"><meta name="robots" content="all"><meta name="author" content="fengzijk"><meta name="keywords" content="中间件,微服务,服务治理,springcloud, java框架,calf-cloud,go学习路线,java spring,  java编程指南, vue开发,vue教程,java,java数据结构"><meta name="apple-mobile-web-app-capable" content="yes"><script src="https://hm.baidu.com/hm.js?7469927f8d68f752c147cd9df8cd19d3"></script><title>fengzijk的博客</title><meta name="description" content="fengzijk的博客">
    <link rel="modulepreload" href="/assets/app.c62b2955.js"><link rel="modulepreload" href="/assets/谈谈服务治理与微服务.html.cd6136ae.js"><link rel="modulepreload" href="/assets/谈谈服务治理与微服务.html.a28c8290.js"><link rel="prefetch" href="/assets/aboat-me.html.7265baab.js"><link rel="prefetch" href="/assets/index.html.c038c7ec.js"><link rel="prefetch" href="/assets/centos-redis-源码安装配置.html.f1f14ff9.js"><link rel="prefetch" href="/assets/centos下yum安装卸载mysql笔记.html.33461b47.js"><link rel="prefetch" href="/assets/Centos安装JDK.html.6c0752bd.js"><link rel="prefetch" href="/assets/ICE入门到精通(一).html.0f6a85e8.js"><link rel="prefetch" href="/assets/java8.html.77563c06.js"><link rel="prefetch" href="/assets/JAVA实现类似百度文库在线浏览.html.7fe84d87.js"><link rel="prefetch" href="/assets/Kotlin初探集成springMvc.html.7c9536b6.js"><link rel="prefetch" href="/assets/MongoDB地理位置索引的实现原理.html.d1e0bb0d.js"><link rel="prefetch" href="/assets/QQ实用技术.html.ba418346.js"><link rel="prefetch" href="/assets/index.html.1794e816.js"><link rel="prefetch" href="/assets/ROM修改之厨房简介及环境配置.html.1b1502c8.js"><link rel="prefetch" href="/assets/关于RPC的总结.html.037d7c7e.js"><link rel="prefetch" href="/assets/服务治理框架之DUBBO.html.f30b8060.js"><link rel="prefetch" href="/assets/自己刷机的一些感触和经验.html.af298b9a.js"><link rel="prefetch" href="/assets/让国产山寨手机死机黑屏之imy.html.ca41c909.js"><link rel="prefetch" href="/assets/阿里云部署Web环境(LAMP).html.2fd4fe4c.js"><link rel="prefetch" href="/assets/404.html.93146c89.js"><link rel="prefetch" href="/assets/aboat-me.html.90600189.js"><link rel="prefetch" href="/assets/index.html.bf3f4e88.js"><link rel="prefetch" href="/assets/centos-redis-源码安装配置.html.aa4a0e51.js"><link rel="prefetch" href="/assets/centos下yum安装卸载mysql笔记.html.8f8a6042.js"><link rel="prefetch" href="/assets/Centos安装JDK.html.3e4cc809.js"><link rel="prefetch" href="/assets/ICE入门到精通(一).html.84ecdd3d.js"><link rel="prefetch" href="/assets/java8.html.21e91c1a.js"><link rel="prefetch" href="/assets/JAVA实现类似百度文库在线浏览.html.6a33f2e3.js"><link rel="prefetch" href="/assets/Kotlin初探集成springMvc.html.00bb4e8d.js"><link rel="prefetch" href="/assets/MongoDB地理位置索引的实现原理.html.6848c28a.js"><link rel="prefetch" href="/assets/QQ实用技术.html.5045b312.js"><link rel="prefetch" href="/assets/index.html.bd8b4e91.js"><link rel="prefetch" href="/assets/ROM修改之厨房简介及环境配置.html.0fdebcce.js"><link rel="prefetch" href="/assets/关于RPC的总结.html.9ccb2018.js"><link rel="prefetch" href="/assets/服务治理框架之DUBBO.html.cca6060d.js"><link rel="prefetch" href="/assets/自己刷机的一些感触和经验.html.cb116888.js"><link rel="prefetch" href="/assets/让国产山寨手机死机黑屏之imy.html.a715fdd1.js"><link rel="prefetch" href="/assets/阿里云部署Web环境(LAMP).html.bf2ce772.js"><link rel="prefetch" href="/assets/404.html.11e2794b.js"><link rel="prefetch" href="/assets/404.8d3e3ac9.js"><link rel="prefetch" href="/assets/Layout.53613210.js">
    <link rel="stylesheet" href="/assets/style.78d99c6f.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">fengzijk的博客</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JAVA"><span class="title">JAVA</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JAVA"><span class="title">JAVA</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="router-link-active" aria-label="java基础"><!--[--><!--]--> java基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="mybatis"><span class="title">mybatis</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="mybatis"><span class="title">mybatis</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/mybatis-plus/" class="" aria-label="mybatis-plus"><!--[--><!--]--> mybatis-plus <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tk-mapper/" class="" aria-label="tk-mapper"><!--[--><!--]--> tk-mapper <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="spring-cloud"><span class="title">spring-cloud</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="spring-cloud"><span class="title">spring-cloud</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="router-link-active" aria-label="spring-cloud"><!--[--><!--]--> spring-cloud <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spring-cloud-alibaba/" class="" aria-label="spring-cloud-alibaba"><!--[--><!--]--> spring-cloud-alibaba <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="杂记"><span class="title">杂记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="杂记"><span class="title">杂记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>老博客</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/old-blog/" class="router-link-active" aria-label="胡侃"><!--[--><!--]--> 胡侃 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/aboat-me.md" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitlab.com/foo/bar" rel="noopener noreferrer" target="_blank" aria-label="GitLab"><!--[--><!--]--> GitLab <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="JAVA"><span class="title">JAVA</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="JAVA"><span class="title">JAVA</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="router-link-active" aria-label="java基础"><!--[--><!--]--> java基础 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="mybatis"><span class="title">mybatis</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="mybatis"><span class="title">mybatis</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/mybatis-plus/" class="" aria-label="mybatis-plus"><!--[--><!--]--> mybatis-plus <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/tk-mapper/" class="" aria-label="tk-mapper"><!--[--><!--]--> tk-mapper <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="spring-cloud"><span class="title">spring-cloud</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="spring-cloud"><span class="title">spring-cloud</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="router-link-active" aria-label="spring-cloud"><!--[--><!--]--> spring-cloud <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/spring-cloud-alibaba/" class="" aria-label="spring-cloud-alibaba"><!--[--><!--]--> spring-cloud-alibaba <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="杂记"><span class="title">杂记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="杂记"><span class="title">杂记</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>老博客</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/old-blog/" class="router-link-active" aria-label="胡侃"><!--[--><!--]--> 胡侃 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></div></div><div class="navbar-item"><a href="/aboat-me.md" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://gitlab.com/foo/bar" rel="noopener noreferrer" target="_blank" aria-label="GitLab"><!--[--><!--]--> GitLab <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#谈谈服务治理与微服务" class="router-link-active router-link-exact-active sidebar-item" aria-label="谈谈服务治理与微服务"><!--[--><!--]--> 谈谈服务治理与微服务 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#互联网架构演变" class="router-link-active router-link-exact-active sidebar-item" aria-label="互联网架构演变"><!--[--><!--]--> 互联网架构演变 <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#单体体架构" class="router-link-active router-link-exact-active sidebar-item" aria-label="单体体架构"><!--[--><!--]--> 单体体架构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#mvc架构" class="router-link-active router-link-exact-active sidebar-item" aria-label="MVC架构"><!--[--><!--]--> MVC架构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#多应用架构" class="router-link-active router-link-exact-active sidebar-item" aria-label="多应用架构"><!--[--><!--]--> 多应用架构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#分布式架构" class="router-link-active router-link-exact-active sidebar-item" aria-label="分布式架构"><!--[--><!--]--> 分布式架构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#soa架构" class="router-link-active router-link-exact-active sidebar-item" aria-label="SOA架构"><!--[--><!--]--> SOA架构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#服务化面临的挑战" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务化面临的挑战"><!--[--><!--]--> 服务化面临的挑战 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#服务治理" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务治理"><!--[--><!--]--> 服务治理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/old-blog/%E8%B0%88%E8%B0%88%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%E4%B8%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1.html#微服务" class="router-link-active router-link-exact-active sidebar-item" aria-label="微服务"><!--[--><!--]--> 微服务 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h2 id="谈谈服务治理与微服务" tabindex="-1"><a class="header-anchor" href="#谈谈服务治理与微服务" aria-hidden="true">#</a> 谈谈服务治理与微服务</h2><p>发表于 2017-06-27</p><p>近期都在大谈微服务，本人也在做相关的工作已经两年左右了，做了一个微服务的分享，整理了这篇文章，有问题可以在下面留言，可以和大家一起讨论。</p><p>先简单介绍了互联网架构的演变，进而介绍了服务化，最后再介绍微服务，微服务是服务治理的升级也是互联网架构的进一步延伸。</p><h2 id="互联网架构演变" tabindex="-1"><a class="header-anchor" href="#互联网架构演变" aria-hidden="true">#</a> 互联网架构演变</h2><h3 id="单体体架构" tabindex="-1"><a class="header-anchor" href="#单体体架构" aria-hidden="true">#</a> 单体体架构</h3><p>在计算机软件发展早期，一般桌面软件都是采用这种架构，不管是界面还是业务处理还是数据处理都放到一个包中。这种其实谈不上架构，但也可以说是很好的架构，因为它足够简单。 如下图：</p><p><a href="/images/fuwu/01.png"><img src="/images/fuwu/01.png" alt="image"></a><a href="/images/fuwu/02.png"><img src="/images/fuwu/02.png" alt="image"></a></p><ul><li><strong>单体式应用的优点明显：</strong> 现有IDE都是集成开发环境，非常适合单体式应用，开发、编译、调试一站式搞定。 一个应用包含所有功能，容易测试和部署。 运行在一个物理节点，环境单一，运行稳定，故障恢复简单。</li><li><strong>单体式应用的缺点也明显：</strong> 业务边界模糊，模块职责不清晰，当系统逐渐变大，代码依赖复杂，难以维护。 所有人同时在一个工程上开发，容易发生代码修改冲突，依赖复杂导致项目协调困难，并且局部修改影响不可知，需要全覆盖测试，需要重新部署，难以支持大团队并行开发。 当系统很大时，编译和部署耗时。 应用水平扩展难，一方面状态在应用内部管理，无法透明路由；另 一方面，不同模块对资源需求差异大，当业务量增大时，一视同仁地为所有模块增加机器导致硬件浪费。</li></ul><h3 id="mvc架构" tabindex="-1"><a class="header-anchor" href="#mvc架构" aria-hidden="true">#</a> MVC架构</h3><p>但随着浏览器的出现便产生了<strong>web</strong>应用，<strong>web</strong>应用的特点是界面部分是显示在浏览器中，服务处理是在服务容器中的，页面显示一般用css+js+html技术来处理，而后端可以用<strong>Java</strong>、<strong>PHP等语言</strong>，这就产生了前后端分离。对于<strong>web</strong>系统，一体架构难以满足前后端分离的开发需求，因而便产生了<strong>MVC</strong>架构。 <strong>为什么我把Mvc但那处处呢，因为他也有划时代的意义，其实从大方向讲MVC架构也是单体架构的一种</strong></p><p><strong>MVC架构如下图：</strong><a href="/images/fuwu/03.png"><img src="/images/fuwu/03.png" alt="image"></a></p><p>MVC才算的上真正意义上的架构，因为它除了解决了前后端分离问题，还引入了一种全新的开发模式，用一种业务逻辑、数据、界面显示分离的方法组织代码，使得整个应用层次更加分明，而且各个层次之间不但减低了耦合性，还提高了各个层次的可重用性。</p><p>但随着应用规模的不断扩大，应用模块不断增加，整个应用也显得越来越臃肿，维护起来也更加困难，因此便又产生了<strong>多应用架构</strong>。</p><h3 id="多应用架构" tabindex="-1"><a class="header-anchor" href="#多应用架构" aria-hidden="true">#</a> 多应用架构</h3><p>多应用架构很简单，就是把原来的应用按照业务特点拆分成多个应用。比如一个大型电商系统可能包含用户系统、商品系统、订单系统、评价系统等等，我们可以把他们独立出来形成一个个单独的应用。多应用架构的特点是应用之间各自独立 ，不相互调用。<strong>如下图：</strong><a href="/images/fuwu/04.png"><img src="/images/fuwu/04.png" alt="image"></a></p><p><strong>多应用虽然解决了应用臃肿问题，但应用之间相互独立，有些共同的业务或代码无法复用。</strong></p><h3 id="分布式架构" tabindex="-1"><a class="header-anchor" href="#分布式架构" aria-hidden="true">#</a> 分布式架构</h3><p>对于一个大型的互联网系统，一般会包含多个应用，而且应用之间往往还存在共同的业务，并且应用之间还存在调用关系。除此之外 ，对于大型的互联网系统还有一些其它的挑战，比如如何应对急剧增长的用户，如何管理好研发团队快速迭代产品研发，如何保持产品升级更加稳定等等 。</p><p>因此，为了使业务得到很好的复用，模块更加容易拓展和维护，我们希望业务与应用分离，某个业务不再属于一个应用，而是作为一个独立的服务单独进行维护。应用本身不再是一个臃肿的模块堆积，而是由一个个模块化的服务组件组合而成。</p><p>在分布式应用架构中，应用相互独立，每个应用代码独立开发，独立部署，应用通过有限的API接口互相关联。API接口属于应用一部分，一般和表示层处于同一层次，两者共享业务逻辑层，API和表示层采用同样的web端技术，通讯协议一般使用HTTP，数据格式是JSON，应用集成方式比较简化。</p><p>分布式架构首先对系统按照业务进行垂直切分，把系统切分为不同应用，针对资源需求特点（比如<strong>CPU/IO/存储密集型</strong>），通过加强硬件配置满足不同应用的需求，避免一刀切方式带来的资源浪费。 <a href="/images/fuwu/05.png"><img src="/images/fuwu/05.png" alt="image"></a></p><p>技术上，<strong>API</strong>采用标准的<strong>HTTP/JSON</strong>进行通讯，调用双方实现难度都不大，但是API一般是“裸奔”的，在系统层面，调用依赖关系不透明，调用可靠性缺乏保障，因此只适用应用之间依赖链路少，调用量不大的系统，即应用之间耦合确实够松的系统。</p><h3 id="soa架构" tabindex="-1"><a class="header-anchor" href="#soa架构" aria-hidden="true">#</a> SOA架构</h3><p>有人说<strong>SOA</strong>就是分布式，其实这个界限有点模糊，不过相比较普通<strong>API</strong>方式，<strong>SOA架构更进一步</strong>：</p><ul><li>每个<strong>service</strong>都是浓缩的精华，聚焦某方面核心业务，同时以复用的方式供整个系统共享。</li><li>服务作为独立的应用，独立部署，接口清晰，很容易做自动化测试和部署。</li><li>服务是无状态的，很容易做水平扩展；通过容器虚拟化技术，实现故障隔离和资源高效利用，业务量大的时候，加机器即可。</li><li>基于SOA的系统可以根据服务运行情况，灵活调控服务资源，包括服务上下架、服务升降级等，使系统真正具备可运营的能力。</li><li>当然天下没有免费的午餐，<strong>SOA</strong>也带来了额外复杂性和弊端：</li><li>系统依赖复杂，给开发/测试/部署带来一系列挑战。</li><li>端到端的调用链路长，可靠性降低，依赖网络状况、服务框架及具体service的质量。</li><li>分布式数据一致性和分布式事务支持困难，一般通过最终一致性简化解决。 端到端的测试和排障复杂，<strong>SOA</strong>对运维提出更高要求。 例子如下：</li></ul><p><a href="/images/fuwu/06.png"><img src="/images/fuwu/06.png" alt="image"></a></p><ul><li><p><strong>SOA的特点</strong></p></li><li><p>可从企业外部访问</p></li><li><p>随时可用</p></li><li><p>粗粒度的服务接口分级</p></li><li><p>松散耦合</p></li><li><p>可重用的服务</p></li><li><p>服务接口设计管理</p></li><li><p>标准化的服务接口</p></li><li><p>支持各种消息模式</p></li><li><p>精确定义的服务契约 说起SOA 我第一想到的是<strong>企业服务总线（ESB）</strong></p><h4 id="soa的好处" tabindex="-1"><a class="header-anchor" href="#soa的好处" aria-hidden="true">#</a> <strong>SOA的好处</strong></h4><p><strong>那么SOA有哪些好处呢？</strong></p></li><li><p>架构上系统更加清晰</p></li><li><p>核心模块稳定，以服务组件为单位进行升级，避免了频繁发布带来的风险</p></li><li><p>开发管理方便</p></li><li><p>单独团队维护、工作分明，职责清晰</p></li><li><p>业务复用、代码复用</p></li><li><p>非常容易拓展</p></li><li><p><strong>SOA</strong>实现方式</p></li></ul><p>如果要实现SOA的话，最常用的方式就是利用<strong>RPC</strong>框架。因为服务组件一般分布在不同的服务器上，所以要实现服务化需要解决的第一个问题就是RPC<strong>远程服务调用</strong>。类似于<strong>RPC</strong>方案有很多，比如：</p><ul><li><strong>Java RMI</strong></li><li><strong>WebService</strong></li><li><strong>Hessian</strong></li><li><strong>Thrift</strong></li><li>…</li><li>…</li></ul><h3 id="服务化面临的挑战" tabindex="-1"><a class="header-anchor" href="#服务化面临的挑战" aria-hidden="true">#</a> 服务化面临的挑战</h3><p><strong>上面提到要实现服务化首先需要解决远程服务调用问题，除此之外，还有很多其他问题需要解决。</strong></p><ul><li>服务越来越多，配置管理复杂</li><li>服务间依赖关系复杂</li><li>服务之间的负载均衡</li><li>服务的拓展</li><li>服务监控</li><li>服务降级</li><li>服务鉴权</li><li>服务上线与下线</li><li>服务文档</li><li>…</li><li>… <strong>有时间我专门有写一篇关于RPC的文章</strong> 我们接着往下说，有了服务 就需要治理跟维护 下面我们讲一讲服务治理</li></ul><h2 id="服务治理" tabindex="-1"><a class="header-anchor" href="#服务治理" aria-hidden="true">#</a> 服务治理</h2><p>上面提到了服务化，其实要想服务化，服务治理是关键。那么有没有好的服务治理方案呢？答案是有的，而且还很多，比如： <strong>ICE</strong> <strong>dubbo</strong> <strong>springcloud</strong> <strong>魔毯</strong> 等等 下面我们简单说说服务治理所需要的</p><ul><li><p>集中的注册中心和存储库，以查找和发布与服务相关的构件和元数据。</p></li><li><p>查找正确的授权服务。</p></li><li><p>避免重复工作。</p></li><li><p>促进重用。</p></li><li><p>确定服务在 <strong>SOA</strong> 生命周期中的当前状态。</p></li><li><p>为服务订阅者提供可见性。</p></li><li><p>确定相关服务和更改某个服务所造成的影响。</p></li><li><p>传达对服务所做的更改。</p></li><li><p>用于联系和强制应用于某个服务的策略的机制。策略通过使用治理框架来定义。</p></li><li><p>具有生命周期感知性的可自定义系统，该系统在生命周期中发生阶段更改时触发验证，以便能够自动化逐个阶段的治理验证。</p></li><li><p>在理想的情况下，注册中心应该针对SOA运行时进行优化，以便能够在运行时期间，使用存储在注册中心的元数据来通过动态路由充实内容。</p><p>详细的各个中间件的原理以及怎么解决服务治理的我有专门写文章</p><p>继续往下说 从去年微服务突然火了起来，咱们看看微服务</p><h2 id="微服务" tabindex="-1"><a class="header-anchor" href="#微服务" aria-hidden="true">#</a> 微服务</h2></li></ul><p>在很多人都在谈微服务，那么到底什么是微服务呢？这里谈谈我对微服务的理解。</p><p>微服务有两个核心：</p><ul><li><strong>微：服务的粒度要细，即服务要细化到API(要做到这一点很不容易，比如服务的切分)</strong></li><li><strong>服务：提供好服务，要让用户感到好用</strong></li></ul><p>上面两个核心总结起来，可以用下面这幅图表示： <a href="/images/fuwu/07.png"><img src="/images/fuwu/07.png" alt="image"></a></p><p>从上面这幅图看出，微服务特别简单（好的架构就应该简单），我们把服务再拆分成一个个API，API是一个完整的功能。然后我们把API扔到一个“云上”，然后用户就可以到“云上”获取所有API的服务，这个“云”保证能提供好的服务。</p><p>我们可以看到，有了微服务之后，服务对用户来说变得特别简单。不再需要去注册中心查找服务，不再去做鉴权处理，不用担心服务挂掉，不用担心不会使用服务，所有的问题这个“云”都解决了。这也是微服务的核心之一，提供好服务。 <a href="/images/fuwu/08.png"><img src="/images/fuwu/08.png" alt="image"></a></p><p>说到这里，大家就应该大体知道该怎么做微服务了 其实“云”是最关键的。 微服务的关键是服务网关，所以，上面提到的“云”就是服务网关。要做微服务，我们先定义一下微服务需要具备的特点。</p><h5 id="微服务的特点" tabindex="-1"><a class="header-anchor" href="#微服务的特点" aria-hidden="true">#</a> 微服务的特点</h5><ul><li>服务需要再细化成API（服务接口——&gt;服务API）</li><li>每个服务由一组API组成</li><li>以API形式对外提供统一格式的服务</li><li>使用者无需任何配置，直接调用（http）</li><li>完整的API文档</li><li>API服务安全可靠稳定</li><li><strong>总结：大概是15年8月接触SOA吧以上就是我的粗浅理解，下一篇我会介绍服务治理的几个框架</strong></li></ul><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.c62b2955.js" defer></script>
  </body>
</html>
